2025-05-06 12:50:50,865 - INFO - Starting trend model evaluation with 4 weeks of visualizations...
2025-05-06 12:50:50,865 - INFO - Loading data...
2025-05-06 12:50:50,951 - INFO - Loaded price data with shape (73007, 11)
2025-05-06 12:50:51,039 - INFO - Loaded grid data with shape (73132, 19)
2025-05-06 12:50:51,304 - INFO - Loaded time features with shape (289296, 10)
2025-05-06 12:50:51,786 - INFO - Loaded holidays data with shape (710017, 4)
2025-05-06 12:50:51,898 - INFO - Loaded weather data with shape (73080, 6)
2025-05-06 12:50:55,280 - INFO - Robust valley detection found 14059 valleys (19.3% of data)
2025-05-06 12:50:55,283 - INFO - Identified 14059 valleys (19.3% of data) using robust valley detection
2025-05-06 12:50:55,283 - INFO - Final merged data shape: (73007, 65)
2025-05-06 12:50:55,286 - INFO - Loading trend model...
2025-05-06 12:50:55,287 - INFO - Searching for trend models...
2025-05-06 12:50:55,287 - INFO - Using best trend model: C:\_Projects\home-energy-ai\src\predictions\prices\models\trend_model\best_trend_model.pkl
2025-05-06 12:50:55,287 - INFO - Loaded parameters for XGBoost model
2025-05-06 12:50:55,788 - INFO - Successfully loaded model from C:\_Projects\home-energy-ai\src\predictions\prices\models\trend_model\best_trend_model.pkl
2025-05-06 12:50:55,789 - INFO - Loaded feature order list with 22 features
2025-05-06 12:50:55,789 - INFO - Model uses 22 features
2025-05-06 12:50:55,789 - INFO - Top features: ['price_24h_avg', 'price_168h_avg', 'is_business_hour', 'hour_avg_price', 'is_morning_peak']
2025-05-06 12:50:55,789 - INFO - Evaluating trend model with 4 weeks of visualizations...
2025-05-06 12:50:55,789 - INFO - Evaluating XGBoost trend model
2025-05-06 12:50:55,789 - INFO - Using 22 features with top important: ['price_24h_avg', 'price_168h_avg', 'is_business_hour']
2025-05-06 12:50:55,792 - INFO - Test data shape: (10952, 65), starting from 2024-01-30 15:00:00+00:00
2025-05-06 12:50:55,792 - INFO - Forecasting test period (10952 steps)...
2025-05-06 12:50:55,807 - INFO - Using saved feature order with 22 features
2025-05-06 12:50:55,808 - INFO - Final test feature matrix: (10952, 22)
2025-05-06 12:50:55,808 - INFO - Creating DMatrix with only feature values (no column names)
2025-05-06 12:50:55,810 - INFO - Clearing existing feature names in model: ['price_24h_avg', 'dayofweek_cos', 'powerExportTotal', 'day_cos', 'hour_avg_price', 'month_cos', 'hour_cos', 'is_evening_peak', 'powerConsumptionTotal', 'wind', 'powerImportTotal', 'powerProductionTotal', 'day_sin', 'is_weekend', 'is_business_hour', 'hour_sin', 'dayofweek_sin', 'nuclear', 'month_sin', 'is_morning_peak', 'hydro', 'price_168h_avg']
2025-05-06 12:50:55,810 - INFO - Creating DMatrix with matching feature order
2025-05-06 12:50:55,962 - INFO - Successfully made predictions
2025-05-06 12:50:55,962 - INFO - Applying heavy smoothing level from trained model
2025-05-06 12:50:56,116 - INFO - Saved forecast results to C:\_Projects\home-energy-ai\src\predictions\prices\plots\evaluation\trend\trend_forecast_results.csv
2025-05-06 12:50:56,117 - INFO - Test MAE: 12.12, RMSE: 21.82, MAPE: 79.30%
2025-05-06 12:50:56,117 - INFO - Direction Accuracy: 0.67, SMAPE: 43.76%
2025-05-06 12:50:56,118 - INFO - Saved evaluation metrics to C:\_Projects\home-energy-ai\src\predictions\prices\plots\evaluation\trend\trend_model_evaluation_metrics.json
2025-05-06 12:50:56,118 - INFO - Generating visualizations...
2025-05-06 12:50:56,545 - INFO - Generating weekly visualizations for 4 weeks...
2025-05-06 12:50:56,782 - INFO - Generated visualization for week 2024-01-30
2025-05-06 12:50:57,015 - INFO - Generated visualization for week 2024-05-21
2025-05-06 12:50:57,384 - INFO - Generated visualization for week 2024-09-10
2025-05-06 12:50:57,624 - INFO - Generated visualization for week 2024-12-31
2025-05-06 12:50:57,624 - INFO - Generating monthly visualizations...
2025-05-06 12:50:58,157 - INFO - Generated visualization for month February 2024
2025-05-06 12:50:58,704 - INFO - Generated visualization for month March 2024
2025-05-06 12:50:59,252 - INFO - Generated visualization for month April 2024
2025-05-06 12:50:59,847 - INFO - Generated visualization for month May 2024
2025-05-06 12:51:00,622 - INFO - Generated visualization for month June 2024
2025-05-06 12:51:01,168 - INFO - Generated visualization for month July 2024
2025-05-06 12:51:01,731 - INFO - Generated visualization for month August 2024
2025-05-06 12:51:02,275 - INFO - Generated visualization for month September 2024
2025-05-06 12:51:02,845 - INFO - Generated visualization for month October 2024
2025-05-06 12:51:03,592 - INFO - Generated visualization for month November 2024
2025-05-06 12:51:04,127 - INFO - Generated visualization for month December 2024
2025-05-06 12:51:04,676 - INFO - Generated visualization for month January 2025
2025-05-06 12:51:05,225 - INFO - Generated visualization for month February 2025
2025-05-06 12:51:05,791 - INFO - Generated visualization for month March 2025
2025-05-06 12:51:06,615 - INFO - Generated visualization for month April 2025
2025-05-06 12:51:07,180 - INFO - Trend model evaluation complete.
2025-05-06 12:51:07,183 - INFO - Trend model evaluation completed successfully.
